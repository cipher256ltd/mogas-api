language: php
php:
- 5.4
- 5.5
- 5.6
- 7.0
- 7.1
- hhvm
env:
  global:
  - setup=basic
matrix:
  allow_failures:
  - php: 5.2
  - php: 5.3
  fast_finish: true
  include:
  - php: 7.0
    env: setup=lowest
  - php: 7.0
    env: setup=stable
  - php: 7.1
    env: setup=lowest
  - php: 7.1
    env: setup=stable
sudo: false
cache:
  directories:
  - "$HOME/.composer/cache"
services:
- memcached
- redis-server
before_install:
- phpenv config-rm xdebug.ini
- echo "extension = memcached.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
- travis_retry composer self-update
install:
- if [[ $setup = 'basic' ]]; then travis_retry composer install --no-interaction --prefer-dist
  --no-suggest; fi
- if [[ $setup = 'stable' ]]; then travis_retry composer update --prefer-dist --no-interaction
  --prefer-stable --no-suggest; fi
- if [[ $setup = 'lowest' ]]; then travis_retry composer update --prefer-dist --no-interaction
  --prefer-lowest --prefer-stable --no-suggest; fi
before_script:
- composer self-update
- composer require laravel/laravel
- composer install
script:
- vendor/bin/phpunit
notifications:
  on_success: never
  on_failure: always
deploy:
  provider: heroku
  api_key:
    secure: Z7ppqxdo1/g3mIlvX3HBrWKvkT3kj77C5NyctRnTaCVHUVXlK1WkstOOBXWoKhQ93EVGE0/uiD0MpKzaN3xKcyuXlkfELQZMSy7i48/sRU+N55GrqA2C7Rcr3km03qfZobDqQwN5QPGwpert2YvUYTrya/jMFgtiJS0BAH1xXFFRXWg7Ws/Ngnj0uYXyObRHNhSqeBUpMQ+q7frBGxxGQs2Cg0gAuLdMaTl0dvt7yrBf/GCD0/BTADnAAWPT7hBO1sgbb7FvQmhNNbVFe4iUZ1spqdgAa6Z/djy8gLW6GNGZZQ+BAnN4gjr/hNv8tuFNtfE06wJfBkDHu8ufCDZ5+lqx8ZTUIfRHUaAmZ+fGlQQAHciCh6snyj3LvNrqU8XjkRUkeQjufvS6b2zSGBT5/EoBcEaYSaNR2Nn7OE3eGsfglWVDmQ8jh/f3tdYa0/POcHXmM7o6BkNmzrxN09eAeXJ1BtkgjDh4YghHCjP3ysU1HmOYy3O3FoTlc6x69bU2ZQSH9FA4/YN34ZIbkvwOl8RvS8j+pOZQHpdgJFTGYSkd3k8t78qggwkr8eUO1WS2VI6/7EWMiGEBUsRzioxjPbLvRfC/TJIhfpGXBtvanxxGIWKtg9P7IZBwV5k+GP0bQxcQHfXf2ys9E1hF2vQlRhVnzL1QTWac+X+qjM/DG/g=
  on:
    - dev